#!/bin/sh
# Air Init Script
# This runs as PID 1

# Mount essential filesystems
mount -t proc proc /proc
mount -t sysfs sysfs /sys
mount -t devtmpfs devtmpfs /dev

# Mount /data partition early
if [ -x /etc/init.d/S01mount-data ]; then
    /etc/init.d/S01mount-data
fi

# Set hostname
hostname air

# Quiet down console output
if [ -w /proc/sys/kernel/printk ]; then
	echo 0 > /proc/sys/kernel/printk
fi

# Start the session; reboot if it exits
if [ -x /usr/bin/air-session ]; then
	/usr/bin/air-session
else
	echo "air-session not found"
fi

/sbin/reboot -f
