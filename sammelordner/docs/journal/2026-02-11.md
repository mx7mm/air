# Air Journal - 2026-02-11

This entry documents the features implemented together today.

## 1) Immutable boot baseline + startup checks

- Goal: make boot deterministic and safer for an immutable root model.
- What was implemented:
  - Optional immutability smoke check during boot.
  - `/data` partition usage and persistence checks.
  - Runtime mount verification and health checks.
- Main files:
  - `board/air/rootfs-overlay/usr/bin/air-immutable-smoke`
  - `board/air/rootfs-overlay/usr/bin/air-healthcheck`
  - `scripts/test-data-persistence.sh`
  - `docs/testing/stabilization-checklist.md`
- Result: boot diagnostics are more structured and reproducible.

## 2) Base services and deterministic init order

- Goal: make startup sequence explicit and configurable.
- What was implemented:
  - Step-based init service order.
  - Runtime logging paths in `/run/log/air` with optional `/data` mirror.
  - Central runtime flags from `/etc/air/runtime.conf`.
- Main files:
  - `board/air/rootfs-overlay/etc/init.d/rcS`
  - `board/air/rootfs-overlay/etc/air/runtime.conf`
  - `board/air/rootfs-overlay/usr/bin/air-runtime-flags`
  - `docs/base-services.md`
- Result: services now start in a predictable order with clear flags.

## 3) Silent boot + minimal primary interface

- Goal: remove visible boot noise and land in a minimal interface.
- What was implemented:
  - Silent boot mode via runtime flag and quiet kernel args.
  - Session starts `air-primary-interface` with simple `Willkommen` output.
- Main files:
  - `board/air/rootfs-overlay/usr/bin/air-primary-interface`
  - `board/air/rootfs-overlay/etc/air/runtime.conf`
  - `board/air/rootfs-overlay/etc/init.d/rcS`
  - GRUB/kernel cmdline updates in board image config.
- Result: user-facing boot path is cleaner and closer to appliance style.

## 4) Local update package format and staging tool

- Goal: create a versioned update package format and local validator/apply tool.
- What was implemented:
  - `air-update` with `check`, `apply`, `status`.
  - Host helper to build update packages.
  - Documented package format (`air-update-1`).
- Main files:
  - `board/air/rootfs-overlay/usr/bin/air-update`
  - `scripts/make-update-package.sh`
  - `docs/update-package-format.md`
- Result: reproducible update artifacts can be validated and staged.

## 5) Boot-time auto update (check/download/stage)

- Goal: check central channel at boot and stage newer package automatically.
- What was implemented:
  - `air-auto-update run/status`.
  - Boot integration via `auto-update` init step.
  - Runtime flags for enable/reboot/manifest URL.
- Main files:
  - `board/air/rootfs-overlay/usr/bin/air-auto-update`
  - `board/air/rootfs-overlay/etc/init.d/rcS`
  - `board/air/rootfs-overlay/etc/air/runtime.conf`
  - `docs/auto-update.md`
- Current scope:
  - Current implementation stages updates.
  - Final root switch + rollback execution path remains for later milestone work.

## 6) GitHub channel publishing for updates

- Goal: use GitHub Releases as central update source.
- What was implemented:
  - Publish helper for version package + channel manifest.
  - Channel points to `air-channel/latest.json`.
- Main files:
  - `scripts/publish-update-github.sh`
  - `scripts/publish-update-channel.sh`
  - `docs/auto-update.md`
- Result: devices can check a single remote manifest URL.

## 7) One-command release publish flow

- Goal: reduce release operation to one command.
- What was implemented:
  - `scripts/release-current-to-github.sh` to package, publish, and refresh channel.
- Main files:
  - `scripts/release-current-to-github.sh`
- Result: release process is faster and less error-prone.

## 8) Release governance and note quality

- Goal: ensure larger changes always ship with clear release documentation.
- What was implemented:
  - Release policy doc.
  - Automated release-notes extraction from `CHANGELOG.md`.
  - Release scripts use notes by default.
- Main files:
  - `docs/release-policy.md`
  - `scripts/extract-release-notes.sh`
  - `scripts/release-current-to-github.sh`
  - `scripts/publish-update-github.sh`
  - `CONTRIBUTING.md`
- Result: process now enforces better documentation discipline.

## 9) Published version

- Version prepared and published today:
  - `v0.1.1` (tag + release + channel update).
- Main references:
  - `board/air/rootfs-overlay/etc/air/VERSION`
  - `CHANGELOG.md`

